(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[24],{237:function(e,t,r){"use strict";t.a=function(e){return+(Math.round(100*e)/100).toFixed(2)}},238:function(e,t,r){"use strict";r(0);var n=r(142),a=r(201),s=r(207),c=r(224),i=r(68),o=r(51),d=r(2),j=Object(n.a)((function(e){return{root:{display:"flex",minHeight:90,minWidth:250,height:90,boxShadow:"none"},details:{display:"flex",flexDirection:"row"},cover:{width:152,height:90,padding:e.spacing(2)}}}));t.a=function(e){var t=e.item,r=j();return Object(d.jsxs)(a.a,{className:r.root,children:[Object(d.jsx)(c.a,{className:r.cover,image:t.image,title:t.name}),Object(d.jsx)("div",{children:Object(d.jsxs)(s.a,{children:[Object(d.jsx)(i.a,{children:Object(d.jsx)(o.Link,{to:"/product/".concat(t.product_id),style:{textDecoration:"none"},children:t.name})}),Object(d.jsx)(i.a,{children:Object(d.jsxs)("strong",{children:["   ",t.price," * ",t.quantity," =  ",t.price," * ",t.quantity," "]})})]})})]})}},339:function(e,t,r){"use strict";r.r(t);var n=r(188),a=r.n(n),s=r(189),c=r(41),i=r(0),o=r(190),d=r.n(o),j=r(38),l=r(180),p=r(51),u=r(308),b=r(333),h=r(199),O=r(68),x=r(177),m=r(134),y=r(132),f=r(201),g=r(207),v=r(202),E=r(142),R=r(9),S=R.a.ORDER_DETAILS_FAILURE,_=R.a.ORDER_DETAILS_REQUEST_START,A=R.a.ORDER_DETAILS_SUCCESS,D=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(r,n){var s,c,i,o,j,l,p,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:_}),s=n(),c=s.userLogin.userInfo,i={headers:{Authorization:"Bearer ".concat(c.token)}},t.next=6,d.a.get("/api/orders/".concat(e),i);case 6:o=t.sent,j=o.data,r({type:A,payload:j}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),r({type:S,payload:null!==(l=null===t.t0||void 0===t.t0||null===(p=t.t0.response)||void 0===p||null===(u=p.data)||void 0===u?void 0:u.message)&&void 0!==l?l:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,r){return t.apply(this,arguments)}}()},L=r(237),I=R.a.ORDER_PAYMENT_FAILURE,P=R.a.ORDER_PAYMENT_REQUEST_START,T=R.a.ORDER_PAYMENT_SUCCESS,k=function(e,t){return function(){var r=Object(s.a)(a.a.mark((function r(n,s){var c,i,o,j,l,p,u,b;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n({type:P}),c=s(),i=c.userLogin.userInfo,o={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(i.token)}},r.next=6,d.a.put("/api/orders/".concat(e,"/pay"),t,o);case 6:j=r.sent,l=j.data,n({type:T,payload:l}),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),n({type:I,payload:null!==(p=null===r.t0||void 0===r.t0||null===(u=r.t0.response)||void 0===u||null===(b=u.data)||void 0===b?void 0:b.message)&&void 0!==p?p:r.t0.message});case 14:case"end":return r.stop()}}),r,null,[[0,11]])})));return function(e,t){return r.apply(this,arguments)}}()},w=r(82),C=R.a.ORDER_DELIVER_SUCCESS,N=R.a.ORDER_DELIVER_FAILURE,F=R.a.ORDER_DELIVER_REQUEST,U=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(r,n){var s,c,i,o,j,l;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:F}),s=n(),c=s.userLogin.userInfo,i={headers:{Authorization:"Bearer ".concat(c.token)}},t.next=6,d.a.put("/api/orders/".concat(e._id,"/deliver"),{},i);case 6:o=t.sent,j=o.data,r({type:C,payload:j}),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(0),"Not authorized, token failed"===(l=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message)&&r(Object(w.a)()),r({type:N,payload:l});case 16:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,r){return t.apply(this,arguments)}}()},M=r(238),B=r(2),z=R.a.ORDER_PAYMENT_RESET,Y=R.a.ORDER_DELIVER_RESET,V=R.a.ORDER_PAYMENT_SUCCESS,$=Object(E.a)({root:{minWidth:205,marginTop:"20px",boxShadow:"rgba(149, 157, 165, 0.2) 0px 8px 24px",minHeight:"650px"},title:{marginTop:"3rem",marginBottom:"3rem"}});t.default=function(e){var t,r=e.match,n=e.history,o=$(),E=Object(i.useState)(!1),R=Object(c.a)(E,2),S=R[0],_=R[1],A=r.params.id,I=Object(j.b)(),P=Object(j.c)((function(e){return e.orderDetails})),T=P.isLoading,w=P.order,C=P.error,N=Object(j.c)((function(e){return e.orderPay})),F=N.isLoading,q=N.isSuccess,H=Object(j.c)((function(e){return e.userLogin})).userInfo,Q=Object(j.c)((function(e){return e.orderDeliver})),W=Q.isLoading,G=Q.isSucesss;T||(w.itemsPrice=Object(L.a)(w.orderItems.reduce((function(e,t){return e+t.price*t.quantity}),0))),Object(i.useEffect)((function(){H||n.push("/login")}),[H,n]),Object(i.useEffect)((function(){(function(){var e=Object(s.a)(a.a.mark((function e(){var t,r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/api/config/paypal");case 2:t=e.sent,r=t.data,(n=document.createElement("script")).type="text/javascript",n.src="https://www.paypal.com/sdk/js?client-id=".concat(r),n.async=!0,n.onload=function(){_(!0)},document.body.appendChild(n);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(i.useEffect)((function(){(!w||q||G||w._id!==A)&&(I({type:V}),I({type:Y}),I(D(A)))}),[I,A,q,w,H,G]),Object(i.useEffect)((function(){(!w||q||G||w._id!==A)&&(I({type:z}),I({type:Y}),I(D(A)))}),[w,q,A,I,G]),console.log(w);var J=Object(i.useCallback)((function(e){console.log(e),I(k(A,e))}),[A,I]),K=Object(i.useCallback)((function(){I(U(w))}),[I,w]);return Object(B.jsx)(B.Fragment,{children:Object(B.jsxs)(v.a,{container:!0,children:[T&&Object(B.jsx)(b.a,{children:"Loading order..."}),!T&&C&&Object(B.jsx)(b.a,{severity:"error",children:C}),!T&&!C&&Object(B.jsxs)(B.Fragment,{children:[Object(B.jsxs)(v.a,{item:!0,xs:12,sm:8,children:[Object(B.jsx)(O.a,{className:o.title,componen:"div",variant:"h6",children:Object(B.jsxs)(b.a,{severity:"info",children:[" Order Number ",Object(B.jsxs)("strong",{children:["".concat(w._id).toUpperCase()," "]})]})}),Object(B.jsxs)(x.a,{dense:!0,component:"nav","aria-label":"shipping",children:[Object(B.jsx)(O.a,{component:"span",variant:"h6",color:"textPrimary",children:Object(B.jsx)("strong",{children:"   SHIPPING DETAILS "})}),Object(B.jsx)(m.a,{children:Object(B.jsx)(y.a,{primary:"Name",secondary:w.user.name})}),Object(B.jsx)(m.a,{children:Object(B.jsx)(y.a,{primary:"Email",secondary:Object(B.jsx)(p.Link,{to:"mailto:".concat(w.user.email),children:w.user.email})})}),Object(B.jsx)(m.a,{children:Object(B.jsx)(y.a,{primary:"Address",secondary:Object(B.jsxs)(B.Fragment,{children:[w.shippingAddress.address,Object(B.jsx)("br",{}),w.shippingAddress.city,", ",w.shippingAddress._state," ",w.shippingAddress.zipCode,", ",w.shippingAddress.country]})})}),Object(B.jsx)(m.a,{children:Object(B.jsx)(y.a,{primary:"Deliver Status",secondary:Object(B.jsxs)(B.Fragment,{children:[w.isDelivered?Object(B.jsxs)(b.a,{severity:"success",children:[" Delivered on ",w.deliveredAt]}):Object(B.jsx)(b.a,{severity:"warning",children:"Order is not delivered yet"}),Object(B.jsx)("br",{})]})})})]}),Object(B.jsx)("br",{}),Object(B.jsxs)(x.a,{dense:!0,component:"nav","aria-label":"billing details",children:[Object(B.jsx)(O.a,{component:"span",variant:"h6",color:"textPrimary",children:Object(B.jsx)("strong",{children:" BILLING DETAILS "})}),Object(B.jsx)(m.a,{children:Object(B.jsx)(y.a,{primary:"Name",secondary:w.user.name})}),Object(B.jsx)(m.a,{children:Object(B.jsx)(y.a,{primary:"Email",secondary:Object(B.jsx)(p.Link,{to:"mailto:".concat(w.user.email),children:w.user.email})})}),Object(B.jsx)(m.a,{children:Object(B.jsx)(y.a,{primary:"Address",secondary:Object(B.jsxs)(B.Fragment,{children:[w.shippingAddress.address,Object(B.jsx)("br",{}),w.shippingAddress.city,", ",w.shippingAddress._state," ",w.shippingAddress.zipCode,", ",w.shippingAddress.country]})})}),Object(B.jsx)(m.a,{children:Object(B.jsx)(y.a,{primary:"Payment Method",secondary:null!==(t=null===w||void 0===w?void 0:w.paymentMethod)&&void 0!==t?t:"Choose a payment Method"})}),Object(B.jsx)(m.a,{children:Object(B.jsx)(y.a,{primary:"Paid Status",secondary:Object(B.jsxs)(B.Fragment,{children:[w.isPaid?Object(B.jsxs)(b.a,{severity:"success",children:[" Paid on ",w.paidAt]}):Object(B.jsx)(b.a,{severity:"warning",children:"Order is not paid yet"}),Object(B.jsx)("br",{})]})})})]})]}),Object(B.jsx)("br",{}),Object(B.jsx)(v.a,{item:!0,xs:12,sm:4,children:Object(B.jsxs)(f.a,{className:o.root,children:[Object(B.jsxs)(g.a,{children:[Object(B.jsx)(O.a,{gutterBottom:!0,children:Object(B.jsx)("strong",{children:"   Order Summary "})}),0===w.orderItems&&Object(B.jsxs)(b.a,{severity:"info",children:[Object(B.jsx)(h.a,{children:"Info"}),"Your cart is empty"]}),Object(B.jsx)(x.a,{dense:!0,children:w.orderItems.map((function(e){return Object(B.jsx)(B.Fragment,{children:Object(B.jsx)(m.a,{children:Object(B.jsx)(M.a,{item:e},e.product_id)},e.product_id)})}))}),Object(B.jsxs)(x.a,{dense:!0,children:[Object(B.jsxs)(m.a,{children:[Object(B.jsx)(y.a,{primary:"Subtotal"}),"$",w.itemsPrice]}),Object(B.jsxs)(m.a,{children:[Object(B.jsx)(y.a,{primary:"Tax"}),"$",w.taxPrice]}),Object(B.jsxs)(m.a,{children:[Object(B.jsx)(y.a,{primary:"Shipping"}),"$",w.shippingPrice]}),Object(B.jsxs)(m.a,{children:[Object(B.jsx)(y.a,{primary:"Total"}),Object(B.jsxs)("strong",{children:["$",w.totalPrice]})]})]}),C&&Object(B.jsxs)(b.a,{severity:"error",children:[Object(B.jsx)(h.a,{children:"Error"}),C]})]}),!w.isPaid&&Object(B.jsxs)(B.Fragment,{children:[F&&Object(B.jsx)(b.a,{severity:"info",children:"Loading..."}),S?Object(B.jsx)(u.PayPalButton,{amount:w.totalPrice,onSuccess:J}):Object(B.jsx)(b.a,{severity:"info",children:"Loading..."})]}),W&&Object(B.jsx)("h4",{children:"Loading..."}),H&&H.isAdmin&&w.isPaid&&!w.isDelivered&&Object(B.jsx)(B.Fragment,{children:Object(B.jsx)(l.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:K,children:"Mark As Delivered"})})]})})]})]})})}}}]);
//# sourceMappingURL=24.fd6740a1.chunk.js.map